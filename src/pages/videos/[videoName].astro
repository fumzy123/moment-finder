---
// Exract the video name from the URL Path parameters
const { videoName } = Astro.params;
console.log('Video name from params:', videoName);

// Construct the API URL to fetch video details
const apiURL = new URL(`/api/videos/${videoName}`, Astro.url);
console.log('Fetching video details from:', apiURL.href);

// Make a GET request to the API Route to retrieve the video details
let response = await fetch(apiURL);
const { data } = await response.json();
const { id, name, url } = data;

const video = {
    width: 1200,
    controls: true,
    ...data,
};

// Layout
import Layout from '../../presentation/layouts/Layout.astro';

// Components
import VideoAnnotationCanvas from '../../presentation/feature/VideoAnnotationCanvas.tsx';
---

<Layout>
    <VideoAnnotationCanvas selectedVideo={video} client:load />
</Layout>
